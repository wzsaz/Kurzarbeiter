<!-- src/app/editor/editor.component.html -->
<form [formGroup]="form">
  <mat-grid-list cols="1" rowHeight="2:1">
    <mat-grid-tile>
      <mat-card>
        <mat-card-header>
          <mat-card-title>
            {{ editingValidId ? 'Editing existing employee' : 'Creating new employee' }}
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field appearance="outline">
            <mat-label>Name</mat-label>
            <input matInput formControlName="firstName" required>
            @if (form.controls['firstName'].invalid) {
              <mat-error>Please enter a name</mat-error>
            }
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Surname</mat-label>
            <input matInput formControlName="lastName" required>
            @if (form.controls['lastName'].invalid) {
              <mat-error>Please enter a surname</mat-error>
            }
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Phone number</mat-label>
            <input matInput formControlName="phone" required>
            @if (form.controls['phone'].invalid) {
              <mat-error>Does not match E.164 format</mat-error>
            }
          </mat-form-field>
          <br>
          <mat-form-field appearance="outline">
            <mat-label>Street</mat-label>
            <input matInput formControlName="street" required>
            @if (form.controls['street'].invalid) {
              <mat-error>Please enter a street</mat-error>
            }
          </mat-form-field>
          <br>
          <mat-form-field appearance="outline">
            <mat-label>Postcode</mat-label>
            <input matInput formControlName="postcode" required>
            @if (form.controls['postcode'].invalid) {
              <mat-error>Please enter a postcode</mat-error>
            }
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>City</mat-label>
            <input matInput formControlName="city" required>
            @if (form.controls['city'].invalid) {
              <mat-error>Please enter a city</mat-error>
            }
          </mat-form-field>

          <mat-accordion class="qualifications-accordion">
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <mat-icon>work</mat-icon>
                  <span>Skills</span>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <label formArrayName="qualifications" class="checkbox-group">
                @for (unused of qualificationsFormArray.controls;track $index) {
                  <mat-checkbox [formControlName]="$index">
                    {{ allQualifications[$index].skill }}
                  </mat-checkbox>
                }
              </label>
            </mat-expansion-panel>
          </mat-accordion>
          <br>
          <mat-card-actions>
            <button mat-raised-button color="primary" (click)="onSave()" [disabled]="form.invalid || !form.dirty">
              <ng-container>
                @if (editingValidId) {
                  <mat-icon>compare</mat-icon>
                  Update
                } @else {
                  <mat-icon>add_box</mat-icon>
                  Create
                }
              </ng-container>
            </button>
            <button mat-raised-button color="warn" (click)="onClear()">
              <mat-icon>delete</mat-icon>
              <span>Clear</span>
            </button>
          </mat-card-actions>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>
</form>

