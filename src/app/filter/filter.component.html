<mat-expansion-panel>
  <mat-expansion-panel-header class="header">
    <h3 mat-subheader class="title">Filter</h3>
    <button mat-icon-button (click)="toggleFilter($event)">
      <mat-icon>{{ filterEnabled ? 'filter_list' : 'filter_list_off' }}</mat-icon>
    </button>
  </mat-expansion-panel-header>

  <form [formGroup]="form">

    <mat-card class="card-container">

      <div class="inner-card">
        <mat-card-header>
          <mat-card-title>First Name</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <app-autocomplete
            [options]="firstNameOptions"
            [control]="getFormControl('firstName')"
            placeholder="First name">
          </app-autocomplete>
        </mat-card-content>
      </div>

      <div class="inner-card">
        <mat-card-header>
          <mat-card-title>Last Name</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <app-autocomplete
            [options]="lastNameOptions"
            [control]="getFormControl('lastName')"
            placeholder="Last name">
          </app-autocomplete>
        </mat-card-content>
      </div>

      <div class="inner-card">
        <mat-card-header>
          <mat-card-title>Phone</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <app-autocomplete
            [options]="phoneOptions"
            [control]="getFormControl('phone')"
            placeholder="Phone">
          </app-autocomplete>
        </mat-card-content>
      </div>

      <div class="inner-card">
        <mat-card-header>
          <mat-card-title>Location</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <app-autocomplete
            [options]="streetOptions"
            [control]="getFormControl('street')"
            placeholder="Street">
          </app-autocomplete>
        </mat-card-content>
      </div>

      <div class="inner-card">
        <mat-card-header>
          <mat-card-title>Location</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <app-autocomplete
            [options]="cityOptions"
            [control]="getFormControl('city')"
            placeholder="City">
          </app-autocomplete>
        </mat-card-content>
      </div>

      <div class="inner-card">
        <mat-card-header>
          <mat-card-title>Location</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <app-autocomplete
            [options]="postcodeOptions"
            [control]="getFormControl('postcode')"
            placeholder="Postcode">
          </app-autocomplete>
        </mat-card-content>
      </div>

    </mat-card>

    <mat-card class="qualifications-card">
      <mat-card-header>
        <mat-card-title>Qualifications</mat-card-title>
      </mat-card-header>
      <mat-card-content class="qualifications-list">
        <div formArrayName="qualifications">
          <mat-chip-listbox multiple>
            @for (q of allQualifications; track $index) {
              <mat-chip-option
                [selected]="qualificationsFormArray.controls[$index].value"
                (selectionChange)="qualificationsFormArray.controls[$index].setValue(!qualificationsFormArray.controls[$index].value)">
                {{ q.skill }}
              </mat-chip-option>
            }
          </mat-chip-listbox>
        </div>
      </mat-card-content>
    </mat-card>

  </form>
</mat-expansion-panel>
